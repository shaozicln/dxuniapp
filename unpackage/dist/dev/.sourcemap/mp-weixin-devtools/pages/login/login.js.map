{"version":3,"names":["_regeneratorRuntime2","require","_asyncToGenerator2","common_vendor","src_utils_request_request","_sfc_main","components","uniLoadingIcon","data","showLoginForm","form","teacherId","name","msg","msgType","isLoading","msgTimer","onLoad","checkLocalToken","methods","showMsg","message","_this","type","arguments","length","undefined","clearTimeout","setTimeout","_this2","mark","_callee","_a","localToken","localUser","loginByOpenIdRes","wrap","_callee$","_context","prev","next","index","getStorageSync","openid","setStorageSync","switchTab","url","post","sent","code","token","__f__","t0","finish","stop","getOpenid","_this3","Promise","resolve","wx$1","login","success","wxLoginRes","request","appid","secret","js_code","grant_type","openidRes","errcode","concat","errmsg","fail","err","errMsg","handleLogin","_this4","_callee2","loginRes","userInfo","_callee2$","_context2","abrupt","username","password","loginTime","Date","toLocaleString","Error","showAdminDialog","_this5","showModal","title","content","editable","placeholderText","res","confirm","checkAdminPassword","trim","_this6","_callee3","_callee3$","_context3","onUnload","Array","_component_uni_loading_icon","resolveComponent","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","e","a","b","t","c","d","o","$event","detail","value","f","g","h","i","j","k","apply","l","m","n","p","size","q","r","s","MiniProgramPage","_export_sfc","wx","createPage"],"sources":["pages/login/login.js"],"sourcesContent":["\"use strict\";\nconst common_vendor = require(\"../../common/vendor.js\");\nconst src_utils_request_request = require(\"../../src/utils/request/request.js\");\nconst _sfc_main = {\n  components: {\n    uniLoadingIcon\n  },\n  data() {\n    return {\n      showLoginForm: false,\n      form: {\n        teacherId: \"\",\n        name: \"\"\n      },\n      msg: \"\",\n      // 提示消息\n      msgType: \"\",\n      // 消息类型：error/success\n      isLoading: false,\n      // 加载状态\n      msgTimer: null\n      // 消息定时器\n    };\n  },\n  onLoad() {\n    this.checkLocalToken();\n  },\n  methods: {\n    // 显示提示消息（3秒自动消失）\n    showMsg(message, type = \"error\") {\n      if (this.msgTimer)\n        clearTimeout(this.msgTimer);\n      this.msg = message;\n      this.msgType = type;\n      this.msgTimer = setTimeout(() => this.msg = \"\", 3e3);\n    },\n    //  校验本地Token：有则直接登录，无则显示表单\n    async checkLocalToken() {\n      var _a;\n      this.isLoading = true;\n      try {\n        const localToken = common_vendor.index.getStorageSync(\"token\");\n        const localUser = common_vendor.index.getStorageSync(\"userInfo\");\n        if (localToken && (localUser == null ? void 0 : localUser.openid) && (localUser == null ? void 0 : localUser.teacherId)) {\n          this.showMsg(\"已登录，正在跳转\", \"success\");\n          setTimeout(() => {\n            common_vendor.index.setStorageSync(\"isLogin\", true);\n            common_vendor.index.switchTab({ url: \"/pages/index/index\" });\n          }, 1e3);\n        } else if (localUser == null ? void 0 : localUser.openid) {\n          const loginByOpenIdRes = await src_utils_request_request.post(\"/loginByOpenId\", {\n            openid: localUser.openid\n          });\n          if (loginByOpenIdRes.code === 200 && ((_a = loginByOpenIdRes.data) == null ? void 0 : _a.token)) {\n            common_vendor.index.setStorageSync(\"token\", loginByOpenIdRes.data.token);\n            common_vendor.index.setStorageSync(\"isLogin\", true);\n            common_vendor.index.__f__(\"log\", \"at pages/login/login.vue:115\", \"通过openid自动登录成功，Token已更新\");\n            this.showMsg(\"自动登录成功，正在跳转\", \"success\");\n            setTimeout(() => {\n              common_vendor.index.switchTab({ url: \"/pages/index/index\" });\n            }, 1e3);\n          } else {\n            this.showMsg(loginByOpenIdRes.msg || \"自动登录失败，请手动登录\");\n            this.showLoginForm = true;\n          }\n        } else {\n          this.showLoginForm = true;\n        }\n      } catch (err) {\n        common_vendor.index.__f__(\"error\", \"at pages/login/login.vue:132\", \"Token校验失败:\", err);\n        this.showMsg(\"登录状态校验异常，请重试\");\n        this.showLoginForm = true;\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    //获取微信openid（优化：建议通过后端中转，避免暴露secret）\n    getOpenid() {\n      return new Promise((resolve) => {\n        common_vendor.wx$1.login({\n          success: (wxLoginRes) => {\n            common_vendor.wx$1.request({\n              url: \"https://api.weixin.qq.com/sns/jscode2session\",\n              data: {\n                appid: \"wx0fe83ffe51ca0b91\",\n                secret: \"7b58cde4303850e042e7c1c18402cbf3\",\n                js_code: wxLoginRes.code,\n                grant_type: \"authorization_code\"\n              },\n              success: (openidRes) => {\n                if (openidRes.data.errcode) {\n                  this.showMsg(`获取身份标识失败：${openidRes.data.errmsg}`);\n                  resolve(null);\n                  return;\n                }\n                resolve(openidRes.data.openid);\n              },\n              fail: (err) => {\n                this.showMsg(`网络异常：${err.errMsg || \"无法获取身份标识\"}`);\n                resolve(null);\n              }\n            });\n          },\n          fail: (err) => {\n            this.showMsg(`微信登录失败：${err.errMsg || \"请检查微信环境\"}`);\n            resolve(null);\n          }\n        });\n      });\n    },\n    // 3. 核心登录逻辑（无变更，已适配 name 字段）\n    async handleLogin() {\n      var _a;\n      this.isLoading = true;\n      try {\n        const openid = await this.getOpenid();\n        if (!openid)\n          return;\n        const loginRes = await src_utils_request_request.post(\"/login\", {\n          username: this.form.teacherId,\n          password: this.form.teacherId,\n          openid\n        });\n        if (loginRes.code === 200 && ((_a = loginRes.data) == null ? void 0 : _a.token)) {\n          const userInfo = {\n            teacherId: this.form.teacherId,\n            openid,\n            name: this.form.name,\n            loginTime: (/* @__PURE__ */ new Date()).toLocaleString()\n          };\n          common_vendor.index.setStorageSync(\"token\", loginRes.data.token);\n          common_vendor.index.setStorageSync(\"userInfo\", userInfo);\n          common_vendor.index.setStorageSync(\"isLogin\", true);\n          this.showMsg(\"登录成功，即将跳转\", \"success\");\n          setTimeout(() => {\n            common_vendor.index.switchTab({ url: \"/pages/index/index\" });\n          }, 1e3);\n        } else {\n          throw new Error(loginRes.msg || \"登录失败，请检查教工号和姓名\");\n        }\n      } catch (err) {\n        common_vendor.index.__f__(\"error\", \"at pages/login/login.vue:207\", \"登录过程异常:\", err);\n        this.showMsg(err.message || \"登录异常，请重试\");\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    // 管理员弹窗\n    showAdminDialog() {\n      common_vendor.index.showModal({\n        title: \"管理员认证\",\n        content: \"请输入管理员密码\",\n        editable: true,\n        placeholderText: \"管理员密码\",\n        success: (res) => {\n          if (res.confirm)\n            this.checkAdminPassword(res.content.trim());\n        },\n        fail: () => this.showMsg(\"弹窗加载失败\")\n      });\n    },\n    // 管理员密码校验\n    async checkAdminPassword(password) {\n      var _a;\n      if (!password)\n        return this.showMsg(\"请输入密码\");\n      this.isLoading = true;\n      try {\n        const res = await src_utils_request_request.post(\"/api/admin/verify\", { password });\n        if (res.code === 200 && ((_a = res.data) == null ? void 0 : _a.token)) {\n          common_vendor.index.setStorageSync(\"token\", res.data.token);\n          common_vendor.index.setStorageSync(\"isAdmin\", true);\n          common_vendor.index.setStorageSync(\"userInfo\", {\n            teacherId: \"admin\",\n            name: \"超级管理员\",\n            openid: \"admin_openid\",\n            loginTime: (/* @__PURE__ */ new Date()).toLocaleString()\n          });\n          common_vendor.index.setStorageSync(\"isLogin\", true);\n          this.showMsg(\"管理员验证通过，即将跳转\", \"success\");\n          setTimeout(() => {\n            common_vendor.index.switchTab({ url: \"/pages/index/index\" });\n          }, 1500);\n        } else {\n          this.showMsg(res.msg || \"密码错误\");\n        }\n      } catch (err) {\n        this.showMsg(\"校验失败：\" + (err.message || \"网络异常\"));\n      } finally {\n        this.isLoading = false;\n      }\n    }\n  },\n  onUnload() {\n    if (this.msgTimer)\n      clearTimeout(this.msgTimer);\n  }\n};\nif (!Array) {\n  const _component_uni_loading_icon = common_vendor.resolveComponent(\"uni-loading-icon\");\n  _component_uni_loading_icon();\n}\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return common_vendor.e({\n    a: $data.showLoginForm\n  }, $data.showLoginForm ? common_vendor.e({\n    b: common_vendor.t($data.form.teacherId ? \"欢迎回来\" : \"请登录\"),\n    c: !$data.form.teacherId\n  }, !$data.form.teacherId ? {} : {}, {\n    d: common_vendor.o(($event) => $data.form.teacherId = $event.detail.value.trim()),\n    e: $data.form.teacherId,\n    f: $data.isLoading,\n    g: common_vendor.o(($event) => $data.form.name = $event.detail.value.trim()),\n    h: $data.form.name,\n    i: $data.isLoading,\n    j: common_vendor.t($data.isLoading ? \"登录中...\" : \"获取Token并登录\"),\n    k: common_vendor.o((...args) => $options.handleLogin && $options.handleLogin(...args)),\n    l: !$data.form.teacherId || !$data.form.name || $data.isLoading\n  }) : {}, {\n    m: $data.isLoading && !$data.showLoginForm\n  }, $data.isLoading && !$data.showLoginForm ? {\n    n: common_vendor.p({\n      type: \"spin\",\n      size: \"36\"\n    })\n  } : {}, {\n    o: $data.msg\n  }, $data.msg ? {\n    p: common_vendor.t($data.msg),\n    q: common_vendor.n($data.msgType === \"error\" ? \"error-msg\" : \"success-msg\")\n  } : {}, {\n    r: common_vendor.o((...args) => $options.showAdminDialog && $options.showAdminDialog(...args)),\n    s: $data.isLoading\n  });\n}\nconst MiniProgramPage = /* @__PURE__ */ common_vendor._export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__scopeId\", \"data-v-e4e4508d\"]]);\nwx.createPage(MiniProgramPage);\n//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map\n"],"mappings":"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"}