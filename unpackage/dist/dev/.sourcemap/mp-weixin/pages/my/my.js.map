{"version":3,"file":"my.js","sources":["pages/my/my.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\r\n  <view class=\"my-container\">\r\n    <!-- 个人信息区域，绑定点击跳转事件 -->\r\n    <view class=\"profile-section\" @tap=\"goToProfile\">\r\n      <image \r\n        class=\"avatar\"\r\n        :src=\"userInfo.avatarUrl\"\r\n        mode=\"aspectFill\"\r\n      ></image>\r\n      <view class=\"user-info-wrapper\">\r\n        <view class=\"user-info\">\r\n          <text class=\"nickname\">{{ userInfo.nickname }}</text>\r\n          <text class=\"desc\">用户身份</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- 消息列表区域 -->\r\n    <view class=\"message-section\">\r\n      <view class=\"section-title\">消息列表</view>\r\n      <template v-for=\"(item, index) in messageList\" :key=\"item.id\"> <!-- 改用item.id作为key更规范 -->\r\n        <view \r\n          class=\"message-item\" \r\n          :class=\"{ unread: item.unread }\"\r\n          @tap=\"handleItemTap(item)\"\r\n        >\r\n          <text class=\"message-title\">{{ item.title }}</text>\r\n          <text class=\"message-content\">{{ item.content }}</text>\r\n          <view class=\"action-buttons\" v-if=\"item.unread\">\r\n            <button \r\n              class=\"btn cancel-unread\" \r\n              size=\"mini\" \r\n              @tap.stop=\"cancelUnread(index)\"\r\n            >\r\n              取消标红\r\n            </button>\r\n            <button \r\n              class=\"btn delete-msg\" \r\n              size=\"mini\" \r\n              @tap.stop=\"deleteMessage(index)\"\r\n            >\r\n              删除\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </template>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive } from 'vue'; \r\n\r\n// 消息项类型定义\r\ninterface MessageItem {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  unread: boolean;\r\n}\r\n\r\n// 用户信息类型定义\r\ninterface UserInfo {\r\n  avatarUrl: string;\r\n  nickname: string;\r\n}\r\n\r\nexport default defineComponent({\r\n  name: 'MyPage',\r\n  setup() {\r\n    // 用户信息响应式数据\r\n    const userInfo = reactive<UserInfo>({\r\n      avatarUrl: '/static/default-avatar.png', \r\n      nickname: '用户姓名' \r\n    });\r\n\r\n    // 消息列表响应式数据\r\n    const messageList = reactive<MessageItem[]>([\r\n      {\r\n        id: 1,\r\n        title: '系统通知',\r\n        content: '您有一条新的系统通知内容...',\r\n        unread: true \r\n      },\r\n      {\r\n        id: 2,\r\n        title: '互动消息',\r\n        content: '有人给您点了一个赞',\r\n        unread: false \r\n      },\r\n      {\r\n        id: 3,\r\n        title: '新消息测试',\r\n        content: '这是一条未读测试消息',\r\n        unread: true \r\n      }\r\n    ]);\r\n\r\n    // 消息项点击事件\r\n    const handleItemTap = (item: MessageItem) => {\r\n      uni.__f__('log','at pages/my/my.vue:100','点击了消息：', item);\r\n    };\r\n\r\n    // 取消未读状态\r\n    const cancelUnread = (index: number) => {\r\n      messageList[index].unread = false;\r\n    };\r\n\r\n    // 删除消息\r\n    const deleteMessage = (index: number) => {\r\n      messageList.splice(index, 1);\r\n    };\r\n\r\n    // 跳转个人信息页面\r\n\tconst goToProfile = () => {\r\n\t  // 显示加载提示\r\n\t  uni.showLoading({\r\n\t    title: '加载中',\r\n\t    mask: true\r\n\t  });\r\n\t  \r\n\t  setTimeout(() => {\r\n\t    uni.navigateTo({\r\n\t      url: '/pages/personnalMsg/personnalMsg',\r\n\t      success: () => uni.hideLoading(),\r\n\t      fail: (err) => {\r\n\t        uni.hideLoading();\r\n\t        uni.__f__('error','at pages/my/my.vue:127','跳转失败:', err);\r\n\t        uni.showToast({\r\n\t          title: '页面加载超时',\r\n\t          icon: 'none'\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  }, 50); // 短暂延迟确保加载提示显示\r\n\t};\r\n\r\n    // 返回模板所需的数据和方法（类型自动推导）\r\n    return {\r\n      userInfo,\r\n      messageList,\r\n      handleItemTap,\r\n      cancelUnread,\r\n      deleteMessage,\r\n      goToProfile\r\n    };\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* 保持原有样式不变 */\r\n.my-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #F0FFF0;\r\n  min-height: 100vh;\r\n}\r\n\r\n.profile-section {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 20vh;\r\n  background: linear-gradient(to bottom , #87CEEB, #F0FFF0);\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  padding: 0 40rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.avatar {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 50%;\r\n  border: 3rpx solid #87CEEB;\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.user-info-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.nickname {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n\r\n.desc {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-top: 5rpx;\r\n  text-align: center;\r\n}\r\n\r\n.message-section {\r\n  flex: 1;\r\n  padding: 20rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20rpx;\r\n  border-left: 10rpx solid #0f0;\r\n  padding-left: 10rpx;\r\n}\r\n\r\n.message-item {\r\n  padding: 20rpx;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.unread {\r\n  background-color: #ffe6e6;\r\n}\r\n\r\n.message-title {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.message-content {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.btn {\r\n  margin-left: 20rpx;\r\n  padding: 10rpx 20rpx;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n.cancel-unread {\r\n  background-color: #0f0;\r\n  color: #fff;\r\n}\r\n\r\n.delete-msg {\r\n  background-color: #f00;\r\n  color: #fff;\r\n}\r\n</style>","import MiniProgramPage from 'D:/Uniapp/dxUniapp/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","reactive","uni"],"mappings":";;AAkEA,MAAA,YAAeA,8BAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,QAAQ;AAEN,UAAM,WAAWC,cAAAA,SAAmB;AAAA,MAClC,WAAW;AAAA,MACX,UAAU;AAAA,IAAA,CACX;AAGD,UAAM,cAAcA,cAAAA,SAAwB;AAAA,MAC1C;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA,MACV;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA,MACV;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA,MACV;AAAA,IAAA,CACD;AAGK,UAAA,gBAAgB,CAAC,SAAsB;AAC3CC,oBAAA,MAAI,MAAM,OAAM,0BAAyB,UAAU,IAAI;AAAA,IAAA;AAInD,UAAA,eAAe,CAAC,UAAkB;AAC1B,kBAAA,KAAK,EAAE,SAAS;AAAA,IAAA;AAIxB,UAAA,gBAAgB,CAAC,UAAkB;AAC3B,kBAAA,OAAO,OAAO,CAAC;AAAA,IAAA;AAIhC,UAAM,cAAc,MAAM;AAExBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,MAAM;AAAA,MAAA,CACP;AAED,iBAAW,MAAM;AACfA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,UACL,SAAS,MAAMA,cAAA,MAAI,YAAY;AAAA,UAC/B,MAAM,CAAC,QAAQ;AACbA,0BAAA,MAAI,YAAY;AAChBA,0BAAA,MAAI,MAAM,SAAQ,0BAAyB,SAAS,GAAG;AACvDA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACP;AAAA,UACH;AAAA,QAAA,CACD;AAAA,SACA,EAAE;AAAA,IAAA;AAIG,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;ACjJD,GAAG,WAAW,eAAe;"}