{"version":3,"file":"my.js","sources":["pages/my/my.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\n  <view class=\"my-container\">\n    <!-- 个人信息区域，绑定点击跳转事件 -->\n    <view class=\"profile-section\" @tap=\"goToProfile\"> \n      <image \n        class=\"avatar\" \n        :src=\"userInfo.avatarUrl\" \n        mode=\"aspectFill\"\n      ></image>\n      <view class=\"user-info-wrapper\">\n        <view class=\"user-info\">\n          <text class=\"nickname\">{{ userInfo.nickname }}</text>\n          <text class=\"desc\">用户身份</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 消息列表区域 -->\n    <view class=\"message-section\">\n      <view class=\"section-title\">消息列表</view>\n      <template v-for=\"(item, index) in messageList\" :key=\"item.id\"> <!-- 改用item.id作为key更规范 -->\n        <view \n          class=\"message-item\" \n          :class=\"{ unread: item.unread }\"\n          @tap=\"handleItemTap(item)\"\n        >\n          <text class=\"message-title\">{{ item.title }}</text>\n          <text class=\"message-content\">{{ item.content }}</text>\n          <view class=\"action-buttons\" v-if=\"item.unread\">\n            <button \n              class=\"btn cancel-unread\" \n              size=\"mini\" \n              @tap.stop=\"cancelUnread(index)\"\n            >\n              取消标红\n            </button>\n            <button \n              class=\"btn delete-msg\" \n              size=\"mini\" \n              @tap.stop=\"deleteMessage(index)\"\n            >\n              删除\n            </button>\n          </view>\n        </view>\n      </template>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive } from 'vue'; \n\n// 消息项类型定义\ninterface MessageItem {\n  id: number;\n  title: string;\n  content: string;\n  unread: boolean;\n}\n\n// 用户信息类型定义\ninterface UserInfo {\n  avatarUrl: string;\n  nickname: string;\n}\n\nexport default defineComponent({\n  name: 'MyPage',\n  setup() {\n    // 用户信息响应式数据\n    const userInfo = reactive<UserInfo>({\n      avatarUrl: '/static/default-avatar.png', \n      nickname: '用户姓名' \n    });\n\n    // 消息列表响应式数据\n    const messageList = reactive<MessageItem[]>([\n      {\n        id: 1,\n        title: '系统通知',\n        content: '您有一条新的系统通知内容...',\n        unread: true \n      },\n      {\n        id: 2,\n        title: '互动消息',\n        content: '有人给您点了一个赞',\n        unread: false \n      },\n      {\n        id: 3,\n        title: '新消息测试',\n        content: '这是一条未读测试消息',\n        unread: true \n      }\n    ]);\n\n    // 消息项点击事件\n    const handleItemTap = (item: MessageItem) => {\n      uni.__f__('log','at pages/my/my.vue:101','点击了消息：', item);\n    };\n\n    // 取消未读状态\n    const cancelUnread = (index: number) => {\n      messageList[index].unread = false;\n    };\n\n    // 删除消息\n    const deleteMessage = (index: number) => {\n      messageList.splice(index, 1);\n    };\n\n    // 跳转个人信息页面\r\n\tconst goToProfile = () => {\r\n\t  // 显示加载提示\r\n\t  uni.showLoading({\r\n\t    title: '加载中',\r\n\t    mask: true\r\n\t  });\r\n\t  \r\n\t  setTimeout(() => {\r\n\t    uni.navigateTo({\r\n\t      url: '/pages/personnalMsg/personnalMsg',\r\n\t      success: () => uni.hideLoading(),\r\n\t      fail: (err) => {\r\n\t        uni.hideLoading();\r\n\t        uni.__f__('error','at pages/my/my.vue:128','跳转失败:', err);\r\n\t        uni.showToast({\r\n\t          title: '页面加载超时',\r\n\t          icon: 'none'\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  }, 50); // 短暂延迟确保加载提示显示\r\n\t};\n\n    // 返回模板所需的数据和方法（类型自动推导）\n    return {\n      userInfo,\n      messageList,\n      handleItemTap,\n      cancelUnread,\n      deleteMessage,\n      goToProfile\n    };\n  }\n});\n</script>\n\n<style scoped>\n/* 保持原有样式不变 */\n.my-container {\n  display: flex;\n  flex-direction: column;\n  background-color: #F0FFF0;\n  min-height: 100vh;\n}\n\n.profile-section {\n  position: relative;\n  width: 100%;\n  height: 20vh;\n  background: linear-gradient(to bottom , #87CEEB, #F0FFF0);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 40rpx;\n  box-sizing: border-box;\n}\n\n.avatar {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  border: 3rpx solid #87CEEB;\n  margin-right: 10rpx;\n}\n\n.user-info-wrapper {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n\n.user-info {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.nickname {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n  text-align: center;\n}\n\n.desc {\n  font-size: 28rpx;\n  color: #666;\n  margin-top: 5rpx;\n  text-align: center;\n}\n\n.message-section {\n  flex: 1;\n  padding: 20rpx;\n  box-sizing: border-box;\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20rpx;\n  border-left: 10rpx solid #0f0;\n  padding-left: 10rpx;\n}\n\n.message-item {\n  padding: 20rpx;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  flex-direction: column;\n}\n\n.unread {\n  background-color: #ffe6e6;\n}\n\n.message-title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.message-content {\n  font-size: 26rpx;\n  color: #666;\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10rpx;\n}\n\n.btn {\n  margin-left: 20rpx;\n  padding: 10rpx 20rpx;\n  border-radius: 8rpx;\n}\n\n.cancel-unread {\n  background-color: #0f0;\n  color: #fff;\n}\n\n.delete-msg {\n  background-color: #f00;\n  color: #fff;\n}\n</style>","import MiniProgramPage from 'D:/小程序/HBuilderX.4.75.2025071105/dx-project/dxuniapp/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","reactive","uni"],"mappings":";;AAmEA,MAAA,YAAeA,8BAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,QAAQ;AAEN,UAAM,WAAWC,cAAAA,SAAmB;AAAA,MAClC,WAAW;AAAA,MACX,UAAU;AAAA,IAAA,CACX;AAGD,UAAM,cAAcA,cAAAA,SAAwB;AAAA,MAC1C;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA,MACV;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA,MACV;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ;AAAA,MACV;AAAA,IAAA,CACD;AAGK,UAAA,gBAAgB,CAAC,SAAsB;AAC3CC,oBAAA,MAAI,MAAM,OAAM,0BAAyB,UAAU,IAAI;AAAA,IAAA;AAInD,UAAA,eAAe,CAAC,UAAkB;AAC1B,kBAAA,KAAK,EAAE,SAAS;AAAA,IAAA;AAIxB,UAAA,gBAAgB,CAAC,UAAkB;AAC3B,kBAAA,OAAO,OAAO,CAAC;AAAA,IAAA;AAIhC,UAAM,cAAc,MAAM;AAExBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,MAAM;AAAA,MAAA,CACP;AAED,iBAAW,MAAM;AACfA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,UACL,SAAS,MAAMA,cAAA,MAAI,YAAY;AAAA,UAC/B,MAAM,CAAC,QAAQ;AACbA,0BAAA,MAAI,YAAY;AAChBA,0BAAA,MAAI,MAAM,SAAQ,0BAAyB,SAAS,GAAG;AACvDA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YAAA,CACP;AAAA,UACH;AAAA,QAAA,CACD;AAAA,SACA,EAAE;AAAA,IAAA;AAIG,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;AClJD,GAAG,WAAW,eAAe;"}