{"version":3,"file":"questionnaireDetail.js","sources":["pages/questionnaire/questionnaireDetail.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVlc3Rpb25uYWlyZS9xdWVzdGlvbm5haXJlRGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"questionnaire-detail-page\">\n\t\t<!-- 顶部导航栏 -->\n\t\t<view class=\"page-header\" v-if=\"questionnaire\">\n\t\t\t<view class=\"back-button\" @click=\"handleBack\">\n\t\t\t\t<text class=\"back-icon\">←</text>\n\t\t\t</view>\n\t\t\t<view class=\"header-title\">{{ questionnaire.title }}</view>\n\t\t</view>\n\n\t\t<!-- 加载中状态 -->\n\t\t<view class=\"loading-state\" v-else>\n\t\t\t<text>加载中...</text>\n\t\t</view>\n\n\t\t<!-- 问卷内容区域 -->\n\t\t<view class=\"questionnaire-content\" v-if=\"questionnaire\">\n\t\t\t<view class=\"question-item\" v-for=\"(question, qIndex) in questionnaire.questions\" :key=\"qIndex\">\n\t\t\t\t<view class=\"question-number\">{{ qIndex + 1 }}.</view>\n\t\t\t\t<view class=\"question-text\">{{ question.text }}</view>\n\n\t\t\t\t<!-- 四种题型区分渲染 -->\n\t\t\t\t<view class=\"question-options\">\n\t\t\t\t\t<!-- 1. 单选（圆圈） -->\n\t\t\t\t\t<view v-if=\"question.type === 'single'\" class=\"options-single\">\n\t\t\t\t\t\t<view class=\"option-single\" v-for=\"(option, oIndex) in question.options\" :key=\"oIndex\"\n\t\t\t\t\t\t\t:class=\"{ selected: isOptionSelected(question.id, option.id) }\"\n\t\t\t\t\t\t\t@click=\"selectOption(question.id, option.id)\">\n\t\t\t\t\t\t\t<view class=\"radio-marker\">\n\t\t\t\t\t\t\t\t<view class=\"radio-dot\" v-if=\"isOptionSelected(question.id, option.id)\"></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text>{{ option.text }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 2. 多选（方块） -->\n\t\t\t\t\t<view v-if=\"question.type === 'multiple'\" class=\"options-multiple\">\n\t\t\t\t\t\t<view class=\"option-multiple\" v-for=\"(option, oIndex) in question.options\" :key=\"oIndex\"\n\t\t\t\t\t\t\t:class=\"{ selected: isOptionSelected(question.id, option.id) }\"\n\t\t\t\t\t\t\t@click=\"selectOption(question.id, option.id)\">\n\t\t\t\t\t\t\t<view class=\"checkbox-marker\">\n\t\t\t\t\t\t\t\t<text class=\"check-icon\" v-if=\"isOptionSelected(question.id, option.id)\">✓</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text>{{ option.text }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 3. 星级评分（打星） -->\n\t\t\t\t\t<view v-if=\"question.type === 'rating'\" class=\"options-rating\">\n\t\t\t\t\t\t<view class=\"star-item\" v-for=\"star in 5\" :key=\"star\"\n\t\t\t\t\t\t\t:class=\"{ selected: question.answer !== null && star <= question.answer }\"\n\t\t\t\t\t\t\t@click=\"selectStar(question.id, star)\">\n\t\t\t\t\t\t\t★\n\t\t\t\t\t\t\t<view class=\"star-text\">{{ getStarScore(star) }}分</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 4. 滑动条打分 -->\n\t\t\t\t\t<view v-if=\"question.type === 'slider'\" class=\"options-slider\">\n\t\t\t\t\t\t<view class=\"slider-container\">\n\t\t\t\t\t\t\t<!-- 滑动提示气泡 -->\n\t\t\t\t\t\t\t<view class=\"slider-tooltip-wrapper\" :style=\"{ left: getSliderPosition(question) }\">\n\t\t\t\t\t\t\t\t<view class=\"slider-tooltip\">{{ question.answer }}分</view>\n\t\t\t\t\t\t\t\t<view class=\"tooltip-arrow\"></view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<!-- 滑块组件 -->\n\t\t\t\t\t\t\t<slider :min=\"1\" :max=\"10\" :step=\"1\" :value=\"question.answer || 1\"\n\t\t\t\t\t\t\t\t@changing=\"handleSliderChanging(question.id, $event)\"\n\t\t\t\t\t\t\t\t@change=\"handleSliderChange(question.id, $event)\" activeColor=\"#42b983\"\n\t\t\t\t\t\t\t\tbackgroundColor=\"#eaeaea\" block-size=\"32rpx\" block-color=\"#42b983\"\n\t\t\t\t\t\t\t\tblock-border-radius=\"50%\"></slider>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 滑动条两端标签 -->\n\t\t\t\t\t\t<view class=\"slider-labels\">\n\t\t\t\t\t\t\t<text>1分</text>\n\t\t\t\t\t\t\t<text>10分</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 底部操作区 -->\n\t\t<view class=\"bottom-actions\" v-if=\"questionnaire\">\n\t\t\t<view class=\"reset-btn\" v-if=\"questionnaire.status === 'completed'\" @click=\"resetQuestionnaire\">\n\t\t\t\t重新填写\n\t\t\t</view>\n\t\t\t<button class=\"submit-btn\" v-if=\"questionnaire.status !== 'completed'\" @click=\"submitQuestionnaire\" :disabled=\"submitting\">\n\t\t\t\t{{ submitting ? '提交中...' : '提交问卷' }}\n\t\t\t</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tonMounted\n\t} from 'vue';\n\timport {\n\t\tpost\n\t} from '@/utils/request/request.js'\n\n\tconst questionnaire = ref(null);\n\tconst submitting = ref(false); // 防止重复提交\n\n\tonMounted(() => {\n\t\tconst pages = getCurrentPages();\n\t\tconst currentPage = pages[pages.length - 1];\n\t\tconst data = currentPage.options.data;\n\t\tif (data) {\n\t\t\t// 解析问卷数据\n\t\t\tconst currentQuestionnaire = JSON.parse(decodeURIComponent(data));\n\t\t\tconst allQuestionnaires = JSON.parse(uni.getStorageSync('questionnaires') || '[]');\n\t\t\tconst storedQuestionnaire = allQuestionnaires.find(q => q.id === currentQuestionnaire.id);\n\t\t\tquestionnaire.value = storedQuestionnaire || currentQuestionnaire;\n\n\t\t\t// 初始化滑动条默认值\n\t\t\tif (questionnaire.value) {\n\t\t\t\tquestionnaire.value.questions.forEach(question => {\n\t\t\t\t\tif (question.type === 'slider' && question.answer === null) {\n\t\t\t\t\t\tquestion.answer = question.min || 0;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tuni.navigateBack();\n\t\t}\n\t});\n\n\tconst handleBack = () => {\n\t\tuni.navigateBack({\n\t\t\tdelta: 1\n\t\t});\n\t};\n\n\t// 判断选项是否选中\n\tconst isOptionSelected = (questionId, optionId) => {\n\t\tif (!questionnaire.value) return false;\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\tif (!question || !question.answer) return false;\n\t\treturn question.type === 'single' ? question.answer === optionId : question.answer?.includes(optionId);\n\t};\n\n\t// 提交分数到后端\n\tconst submitScore = async (questionId, scoreValue) => {\n\t\tif (submitting.value) return;\n\n\t\ttry {\n\t\t\tsubmitting.value = true;\n\n\t\t\t// 获取当前时间，格式化为 \"YYYY-MM-DD HH:mm:ss\"\n\t\t\tconst now = new Date();\n\t\t\tconst scoreTime = `${now.getFullYear()}-${\n\t\t\t      (now.getMonth() + 1).toString().padStart(2, '0')\n\t\t\t    }-${\n\t\t\t      now.getDate().toString().padStart(2, '0')\n\t\t\t    } ${\n\t\t\t      now.getHours().toString().padStart(2, '0')\n\t\t\t    }:${\n\t\t\t      now.getMinutes().toString().padStart(2, '0')\n\t\t\t    }:${\n\t\t\t      now.getSeconds().toString().padStart(2, '0')\n\t\t\t    }`;\n\n\t\t\t// 构造提交数据\n\t\t\tconst scoreData = {\n\t\t\t\tscoreId: 1,\n\t\t\t\ttargetId: 1,\n\t\t\t\ttargetUserId: 1,\n\t\t\t\tquestionnaireId: questionnaire.value.id,\n\t\t\t\tquestionId: questionId,\n\t\t\t\tscoreValue: scoreValue,\n\t\t\t\tscoreLevel: scoreValue >= 8 ? 'A' : scoreValue >= 6 ? 'B' : scoreValue >= 4 ? 'C' : 'D',\n\t\t\t\tisModified: 0,\n\t\t\t\tscoreTime: scoreTime,\n\t\t\t\tlastModifyTime: scoreTime\n\t\t\t};\n\n\t\t\t// 调用接口提交\n\t\t\tconsole.log('提交的数据:', scoreData);\n\t\t\tconst res = await post('/question/score', scoreData);\n\t\t\tconsole.log('接口返回结果:', res);\n\n\t\t\tif (res.code === 200) {\n\t\t\t\tconsole.log(`问题 ${questionId} 分数提交成功`, res.data);\n\t\t\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\t\t\tif (question) {\n\t\t\t\t\tif (question.scoreId) {\n\t\t\t\t\t\tquestion.isModified = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 安全获取scoreId\n\t\t\t\t\t\tquestion.scoreId = res.data?.scoreId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `提交失败: ${res.msg || '未知错误'}`,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t} catch(err) {\n\t\t\tconsole.error('提交分数异常:', err);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '网络错误，提交失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t} finally {\n\t\t\tsubmitting.value = false;\n\t\t}\n\t};\n\n\t// 单选/多选选择选项\n\tconst selectOption = (questionId, optionId) => {\n\t\tif (!questionnaire.value) return;\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\tif (!question) return;\n\n\t\tif (question.type === 'single') {\n\t\t\tquestion.answer = optionId;\n\t\t\t// 提交分数\n\t\t\tconst selectedOption = question.options.find(opt => opt.id === optionId);\n\t\t\tif (selectedOption) {\n\t\t\t\tsubmitScore(questionId, selectedOption.value || 0);\n\t\t\t}\n\t\t} else if (question.type === 'multiple') {\n\t\t\tif (!question.answer) question.answer = [];\n\t\t\tconst index = question.answer.indexOf(optionId);\n\t\t\tif (index > -1) {\n\t\t\t\tquestion.answer.splice(index, 1);\n\t\t\t} else {\n\t\t\t\tquestion.answer.push(optionId);\n\t\t\t}\n\t\t\t// 多选分数计算\n\t\t\tconst selectedOptions = question.options.filter(opt => question.answer.includes(opt.id));\n\t\t\tconst score = selectedOptions.length ?\n\t\t\t\tMath.round(selectedOptions.reduce((sum, opt) => sum + (opt.value || 0), 0) / selectedOptions.length) :\n\t\t\t\t0;\n\t\t\tsubmitScore(questionId, score);\n\t\t}\n\t};\n\n\t// 星级评分选中逻辑\n\tconst isStarSelected = (questionId, index) => {\n\t\tif (!questionnaire.value) return false;\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\tif (!question || question.answer === null) return false;\n\t\tconst optionIndex = question.options.findIndex(opt => opt.id === question.answer);\n\t\treturn index <= optionIndex;\n\t};\n\n\t// 选择星级\n\tconst getStarScore = (star) => {\n\t\treturn star * 2;\n\t};\n\n\tconst selectStar = (questionId, star) => {\n\t\tif (!questionnaire.value) return;\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\tif (question) {\n\t\t\tquestion.answer = star;\n\t\t\tconst score = Math.round((star / 5) * 100);\n\t\t\tsubmitScore(questionId, score);\n\t\t}\n\t};\n\n\t// 计算滑块位置百分比\n\tconst getSliderPosition = (question) => {\n\t\tconst value = question.answer || 1;\n\t\tconst min = 1;\n\t\tconst max = 10;\n\t\tconst percent = ((value - min) / (max - min)) * 100;\n\t\treturn `${Math.max(0, Math.min(100, percent))}%`;\n\t};\n\n\t// 滑动过程中实时更新\n\tconst handleSliderChanging = (questionId, e) => {\n\t\tif (!questionnaire.value) return;\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\tif (question) question.answer = e.detail.value;\n\t};\n\n\t// 滑动结束确认并提交\n\tconst handleSliderChange = (questionId, e) => {\n\t\tif (!questionnaire.value) return;\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\n\t\tif (question) {\n\t\t\tquestion.answer = e.detail.value;\n\t\t\tconst score = Math.round((e.detail.value / 10) * 100);\n\t\t\tsubmitScore(questionId, score);\n\t\t}\n\t};\n\n\t// 提交问卷（整体标记完成状态）\n\tconst submitQuestionnaire = async () => {\n\t\tif (!questionnaire.value || submitting.value) return;\n\n\t\t// 验证所有问题是否已回答\n\t\tconst allAnswered = questionnaire.value.questions.every(question => {\n\t\t\treturn question.answer !== null && question.answer !== undefined;\n\t\t});\n\n\t\tif (!allAnswered) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请完成所有问题',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tsubmitting.value = true;\n\t\t\t\n\t\t\t// 标记问卷完成状态\n\t\t\tquestionnaire.value.status = 'completed';\n\n\t\t\t// 更新本地存储\n\t\t\tconst allQuestionnaires = JSON.parse(uni.getStorageSync('questionnaires') || '[]');\n\t\t\tconst index = allQuestionnaires.findIndex(q => q.id === questionnaire.value.id);\n\t\t\tif (index !== -1) {\n\t\t\t\tallQuestionnaires[index] = questionnaire.value;\n\t\t\t} else {\n\t\t\t\tallQuestionnaires.push(questionnaire.value);\n\t\t\t}\n\t\t\tuni.setStorageSync('questionnaires', JSON.stringify(allQuestionnaires));\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '所有评分已提交',\n\t\t\t\ticon: 'success'\n\t\t\t});\n\t\t\tsetTimeout(() => uni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t}), 800);\n\t\t} catch (err) {\n\t\t\tconsole.error('提交问卷异常:', err);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '提交失败，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t} finally {\n\t\t\tsubmitting.value = false;\n\t\t}\n\t};\n\n\t// 重置问卷\n\tconst resetQuestionnaire = () => {\n\t\tuni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '确定重新填写？当前答案将清空',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm && questionnaire.value) {\n\t\t\t\t\tquestionnaire.value.questions.forEach(question => {\n\t\t\t\t\t\tquestion.answer = null;\n\t\t\t\t\t\tif (question.type === 'slider') {\n\t\t\t\t\t\t\tquestion.answer = question.min || 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tquestionnaire.value.status = 'pending';\n\t\t\t\t\tconst allQuestionnaires = JSON.parse(uni.getStorageSync('questionnaires') || '[]');\n\t\t\t\t\tconst index = allQuestionnaires.findIndex(q => q.id === questionnaire.value.id);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tallQuestionnaires[index] = JSON.parse(JSON.stringify(questionnaire.value));\n\t\t\t\t\t\tuni.setStorageSync('questionnaires', JSON.stringify(allQuestionnaires));\n\t\t\t\t\t}\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '已重置，可重新填写',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n</script>\n\n<style scoped>\n\t/* 样式保持不变 */\n\t.questionnaire-detail-page {\n\t\tbackground-color: #f5f5f5;\n\t\tmin-height: 100vh;\n\t\tfont-size: 16px;\n\t\tpadding-bottom: 140rpx;\n\t}\n\n\t/* 顶部导航栏样式 */\n\t.page-header {\n\t\theight: 120rpx;\n\t\tbackground-color: #87CEEB;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 0 30rpx;\n\t\tposition: relative;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n\t}\n\n\t.back-button {\n\t\tposition: absolute;\n\t\tleft: 30rpx;\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tborder-radius: 50%;\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 10;\n\t}\n\n\t.back-icon {\n\t\tcolor: #fff;\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t}\n\n\t.header-title {\n\t\tcolor: #fff;\n\t\tfont-size: 36rpx;\n\t\tfont-weight: 500;\n\t\ttext-align: center;\n\t\tmax-width: calc(100% - 120rpx);\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t/* 问卷内容样式 */\n\t.questionnaire-content {\n\t\tpadding: 30rpx;\n\t}\n\n\t.question-item {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 20rpx;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.question-number {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\tcolor: #333;\n\t\tmargin-bottom: 15rpx;\n\t}\n\n\t.question-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tmargin-bottom: 25rpx;\n\t\tline-height: 1.6;\n\t}\n\n\t/* 单选样式 */\n\t.options-single {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 15rpx;\n\t}\n\n\t.option-single {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 25rpx 30rpx;\n\t\tborder: 1rpx solid #eaeaea;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tcolor: #666;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.option-single.selected {\n\t\tborder-color: #42b983;\n\t\tbackground-color: #f6ffed;\n\t}\n\n\t.radio-marker {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t\tborder: 2rpx solid #999;\n\t\tborder-radius: 50%;\n\t\tmargin-right: 20rpx;\n\t\tposition: relative;\n\t}\n\n\t.option-single.selected .radio-marker {\n\t\tborder-color: #42b983;\n\t}\n\n\t.radio-dot {\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\twidth: 16rpx;\n\t\theight: 16rpx;\n\t\tbackground-color: #42b983;\n\t\tborder-radius: 50%;\n\t}\n\n\t/* 多选样式 */\n\t.options-multiple {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 15rpx;\n\t}\n\n\t.option-multiple {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 25rpx 30rpx;\n\t\tborder: 1rpx solid #eaeaea;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tcolor: #666;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.option-multiple.selected {\n\t\tborder-color: #42b983;\n\t\tbackground-color: #f6ffed;\n\t}\n\n\t.checkbox-marker {\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t\tborder: 2rpx solid #999;\n\t\tborder-radius: 6rpx;\n\t\tmargin-right: 20rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.option-multiple.selected .checkbox-marker {\n\t\tbackground-color: #42b983;\n\t\tborder-color: #42b983;\n\t}\n\n\t.check-icon {\n\t\tcolor: white;\n\t\tfont-size: 20rpx;\n\t\tfont-weight: bold;\n\t}\n\n\t/* 星级评分样式 */\n\t.options-rating {\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\twidth: 100%;\n\t\tpadding: 10rpx 0;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.star-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 15rpx 5rpx;\n\t\tfont-size: 40rpx;\n\t\tcolor: #ccc;\n\t\ttransition: all 0.2s;\n\t\tcursor: pointer;\n\t\tflex: 1;\n\t\ttext-align: center;\n\t}\n\n\t.star-item.selected {\n\t\tcolor: #faad14;\n\t}\n\n\t.star-text {\n\t\tfont-size: 22rpx;\n\t\tmargin-top: 8rpx;\n\t\twhite-space: nowrap;\n\t}\n\n\t/* 滑动条样式 */\n\t.options-slider {\n\t\tpadding: 40rpx 20rpx 20rpx;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\n\t.slider-container {\n\t\twidth: 100%;\n\t\tmax-width: 600rpx;\n\t\tpadding: 0 10rpx;\n\t\tposition: relative;\n\t\theight: 80rpx;\n\t}\n\n\t/* 滑动提示气泡 */\n\t.slider-tooltip-wrapper {\n\t\tposition: absolute;\n\t\ttop: -50rpx;\n\t\ttransform: translateX(-50%);\n\t\tpointer-events: none;\n\t\tz-index: 10;\n\t}\n\n\t.slider-tooltip {\n\t\tbackground-color: #42b983;\n\t\tcolor: white;\n\t\tpadding: 8rpx 16rpx;\n\t\tborder-radius: 8rpx;\n\t\tfont-size: 26rpx;\n\t\twhite-space: nowrap;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\n\t}\n\n\t.tooltip-arrow {\n\t\twidth: 0;\n\t\theight: 0;\n\t\tborder-left: 10rpx solid transparent;\n\t\tborder-right: 10rpx solid transparent;\n\t\tborder-top: 10rpx solid #42b983;\n\t\tmargin: 0 auto;\n\t}\n\n\t/* 滑块样式优化 */\n\tslider {\n\t\twidth: 100%;\n\t\theight: 80rpx;\n\t\tmargin: 0 auto;\n\t}\n\n\t/* 标签样式优化 */\n\t.slider-labels {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\twidth: 100%;\n\t\tmax-width: 600rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t\tmargin-top: 10rpx;\n\t\tpadding: 0 10rpx;\n\t}\n\n\t/* 底部操作区 */\n\t.bottom-actions {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground-color: #fff;\n\t\tborder-top: 1rpx solid #eaeaea;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 99;\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.submit-btn {\n\t\tbackground-color: #42b983;\n\t\tcolor: #fff;\n\t\tborder: none;\n\t\tborder-radius: 60rpx;\n\t\twidth: 600rpx;\n\t\tpadding: 25rpx 0;\n\t\ttext-align: center;\n\t\tfont-size: 30rpx;\n\t\tbox-shadow: 0 4rpx 10rpx rgba(66, 185, 131, 0.3);\n\t}\n\n\t.submit-btn:disabled {\n\t\tbackground-color: #a0d9b9;\n\t\tcursor: not-allowed;\n\t}\n\n\t.reset-btn {\n\t\twidth: 600rpx;\n\t\tpadding: 25rpx 0;\n\t\ttext-align: center;\n\t\tcolor: #42b983;\n\t\tborder: 1rpx solid #42b983;\n\t\tborder-radius: 60rpx;\n\t\tfont-size: 30rpx;\n\t\tbackground-color: #fff;\n\t}\n\n\t/* 加载状态 */\n\t.loading-state {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 300rpx;\n\t\tcolor: #999;\n\t\tfont-size: 28rpx;\n\t}\n</style>\n","import MiniProgramPage from 'D:/PJ-system/dxUniapp/pages/questionnaire/questionnaireDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","post"],"mappings":"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"}