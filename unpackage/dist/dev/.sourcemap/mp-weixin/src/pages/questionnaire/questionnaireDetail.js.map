{"version":3,"file":"questionnaireDetail.js","sources":["src/pages/questionnaire/questionnaireDetail.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3JjL3BhZ2VzL3F1ZXN0aW9ubmFpcmUvcXVlc3Rpb25uYWlyZURldGFpbC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"questionnaire-detail-page\">\r\n\t\t<!-- 顶部导航栏 -->\r\n\t\t<view class=\"page-header\" v-if=\"questionnaire\">\r\n\t\t\t<view class=\"back-button\" @click=\"handleBack\">\r\n\t\t\t\t<text class=\"back-icon\">←</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"header-title\">{{ questionnaire.title }}</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 加载中状态 -->\r\n\t\t<view class=\"loading-state\" v-else>\r\n\t\t\t<text>加载中...</text>\r\n\t\t</view>\r\n\r\n\t\t<!-- 问卷内容区域 -->\r\n\t\t<view class=\"questionnaire-content\" v-if=\"questionnaire\">\r\n\t\t\t<view class=\"question-item\" v-for=\"(question, qIndex) in questionnaire.questions\" :key=\"qIndex\">\r\n\t\t\t\t<view class=\"question-number\">{{ qIndex + 1 }}.</view>\r\n\t\t\t\t<view class=\"question-text\">{{ question.text }}</view>\r\n\r\n\t\t\t\t<!-- 四种题型区分渲染 -->\r\n\t\t\t\t<view class=\"question-options\">\r\n\t\t\t\t\t<!-- 1. 单选（圆圈） -->\r\n\t\t\t\t\t<view v-if=\"question.type === 'single'\" class=\"options-single\">\r\n\t\t\t\t\t\t<view class=\"option-single\" v-for=\"(option, oIndex) in question.options\" :key=\"oIndex\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: isOptionSelected(question.id, option.id) }\"\r\n\t\t\t\t\t\t\t@click=\"selectOption(question.id, option.id)\">\r\n\t\t\t\t\t\t\t<view class=\"radio-marker\">\r\n\t\t\t\t\t\t\t\t<view class=\"radio-dot\" v-if=\"isOptionSelected(question.id, option.id)\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text>{{ option.text }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 2. 多选（方块） -->\r\n\t\t\t\t\t<view v-if=\"question.type === 'multiple'\" class=\"options-multiple\">\r\n\t\t\t\t\t\t<view class=\"option-multiple\" v-for=\"(option, oIndex) in question.options\" :key=\"oIndex\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: isOptionSelected(question.id, option.id) }\"\r\n\t\t\t\t\t\t\t@click=\"selectOption(question.id, option.id)\">\r\n\t\t\t\t\t\t\t<view class=\"checkbox-marker\">\r\n\t\t\t\t\t\t\t\t<text class=\"check-icon\" v-if=\"isOptionSelected(question.id, option.id)\">✓</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text>{{ option.text }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 3. 星级评分（打星） -->\r\n\t\t\t\t\t<view v-if=\"question.type === 'rating'\" class=\"options-rating\">\r\n\t\t\t\t\t\t<view class=\"star-item\" v-for=\"star in 5\" :key=\"star\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: question.answer !== null && star <= question.answer }\"\r\n\t\t\t\t\t\t\t@click=\"selectStar(question.id, star)\">\r\n\t\t\t\t\t\t\t★\r\n\t\t\t\t\t\t\t<view class=\"star-text\">{{ getStarScore(star) }}分</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 4. 滑动条打分 -->\r\n\t\t\t\t\t<view v-if=\"question.type === 'slider'\" class=\"options-slider\">\r\n\t\t\t\t\t\t<view class=\"slider-container\">\r\n\t\t\t\t\t\t\t<!-- 滑动提示气泡 -->\r\n\t\t\t\t\t\t\t<view class=\"slider-tooltip-wrapper\" :style=\"{ left: getSliderPosition(question) }\">\r\n\t\t\t\t\t\t\t\t<view class=\"slider-tooltip\">{{ question.answer }}分</view>\r\n\t\t\t\t\t\t\t\t<view class=\"tooltip-arrow\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<!-- 滑块组件 -->\r\n\t\t\t\t\t\t\t<slider :min=\"1\" :max=\"10\" :step=\"1\" :value=\"question.answer || 1\"\r\n\t\t\t\t\t\t\t\t@changing=\"handleSliderChanging(question.id, $event)\"\r\n\t\t\t\t\t\t\t\t@change=\"handleSliderChange(question.id, $event)\" activeColor=\"#42b983\"\r\n\t\t\t\t\t\t\t\tbackgroundColor=\"#eaeaea\" block-size=\"32rpx\" block-color=\"#42b983\"\r\n\t\t\t\t\t\t\t\tblock-border-radius=\"50%\"></slider>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 滑动条两端标签 -->\r\n\t\t\t\t\t\t<view class=\"slider-labels\">\r\n\t\t\t\t\t\t\t<text>1分</text>\r\n\t\t\t\t\t\t\t<text>10分</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部操作区 -->\r\n\t\t<view class=\"bottom-actions\" v-if=\"questionnaire\">\r\n\t\t\t<view class=\"reset-btn\" v-if=\"questionnaire.status === 'completed'\" @click=\"resetQuestionnaire\">\r\n\t\t\t\t重新填写\r\n\t\t\t</view>\r\n\t\t\t<button class=\"submit-btn\" v-if=\"questionnaire.status !== 'completed'\" @click=\"submitQuestionnaire\" :disabled=\"submitting\">\r\n\t\t\t\t{{ submitting ? '提交中...' : '提交问卷' }}\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted\r\n\t} from 'vue';\r\n\timport {\r\n\t\tpost\r\n\t} from '/src/utils/request/request'\r\n\r\n\tconst questionnaire = ref(null);\r\n\tconst submitting = ref(false); // 防止重复提交\r\n\r\n\tonMounted(() => {\r\n\t\tconst pages = getCurrentPages();\r\n\t\tconst currentPage = pages[pages.length - 1];\r\n\t\tconst data = currentPage.options.data;\r\n\t\tif (data) {\r\n\t\t\t// 解析问卷数据\r\n\t\t\tconst currentQuestionnaire = JSON.parse(decodeURIComponent(data));\r\n\t\t\tconst allQuestionnaires = JSON.parse(uni.getStorageSync('questionnaires') || '[]');\r\n\t\t\tconst storedQuestionnaire = allQuestionnaires.find(q => q.id === currentQuestionnaire.id);\r\n\t\t\tquestionnaire.value = storedQuestionnaire || currentQuestionnaire;\r\n\r\n\t\t\t// 初始化滑动条默认值\r\n\t\t\tif (questionnaire.value) {\r\n\t\t\t\tquestionnaire.value.questions.forEach(question => {\r\n\t\t\t\t\tif (question.type === 'slider' && question.answer === null) {\r\n\t\t\t\t\t\tquestion.answer = question.min || 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tuni.navigateBack();\r\n\t\t}\r\n\t});\r\n\r\n\tconst handleBack = () => {\r\n\t\tuni.navigateBack({\r\n\t\t\tdelta: 1\r\n\t\t});\r\n\t};\r\n\r\n\t// 判断选项是否选中\r\n\tconst isOptionSelected = (questionId, optionId) => {\r\n\t\tif (!questionnaire.value) return false;\r\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\tif (!question || !question.answer) return false;\r\n\t\treturn question.type === 'single' ? question.answer === optionId : question.answer?.includes(optionId);\r\n\t};\r\n\r\n\t// 提交分数到后端\r\n\tconst submitScore = async (questionId, scoreValue) => {\r\n\t\tif (submitting.value) return;\r\n\r\n\t\ttry {\r\n\t\t\tsubmitting.value = true;\r\n\r\n\t\t\t// 获取当前时间，格式化为 \"YYYY-MM-DD HH:mm:ss\"\r\n\t\t\tconst now = new Date();\r\n\t\t\tconst scoreTime = `${now.getFullYear()}-${\r\n\t\t\t      (now.getMonth() + 1).toString().padStart(2, '0')\r\n\t\t\t    }-${\r\n\t\t\t      now.getDate().toString().padStart(2, '0')\r\n\t\t\t    } ${\r\n\t\t\t      now.getHours().toString().padStart(2, '0')\r\n\t\t\t    }:${\r\n\t\t\t      now.getMinutes().toString().padStart(2, '0')\r\n\t\t\t    }:${\r\n\t\t\t      now.getSeconds().toString().padStart(2, '0')\r\n\t\t\t    }`;\r\n\r\n\t\t\t// 构造提交数据\r\n\t\t\tconst scoreData = {\r\n\t\t\t\tscoreId: 1,\r\n\t\t\t\ttargetId: 1,\r\n\t\t\t\ttargetUserId: 1,\r\n\t\t\t\tquestionnaireId: questionnaire.value.id,\r\n\t\t\t\tquestionId: questionId,\r\n\t\t\t\tscoreValue: scoreValue,\r\n\t\t\t\tscoreLevel: scoreValue >= 8 ? 'A' : scoreValue >= 6 ? 'B' : scoreValue >= 4 ? 'C' : 'D',\r\n\t\t\t\tisModified: 0,\r\n\t\t\t\tscoreTime: scoreTime,\r\n\t\t\t\tlastModifyTime: scoreTime\r\n\t\t\t};\r\n\r\n\t\t\t// 调用接口提交\r\n\t\t\tconsole.log('提交的数据:', scoreData);\r\n\t\t\tconst res = await post('/question/score', scoreData);\r\n\t\t\tconsole.log('接口返回结果:', res);\r\n\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tconsole.log(`问题 ${questionId} 分数提交成功`, res.data);\r\n\t\t\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\t\t\tif (question) {\r\n\t\t\t\t\tif (question.scoreId) {\r\n\t\t\t\t\t\tquestion.isModified = 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 安全获取scoreId\r\n\t\t\t\t\t\tquestion.scoreId = res.data?.scoreId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: `提交失败: ${res.msg || '未知错误'}`,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\tconsole.error('提交分数异常:', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '网络错误，提交失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tsubmitting.value = false;\r\n\t\t}\r\n\t};\r\n\r\n\t// 单选/多选选择选项\r\n\tconst selectOption = (questionId, optionId) => {\r\n\t\tif (!questionnaire.value) return;\r\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\tif (!question) return;\r\n\r\n\t\tif (question.type === 'single') {\r\n\t\t\tquestion.answer = optionId;\r\n\t\t\t// 提交分数\r\n\t\t\tconst selectedOption = question.options.find(opt => opt.id === optionId);\r\n\t\t\tif (selectedOption) {\r\n\t\t\t\tsubmitScore(questionId, selectedOption.value || 0);\r\n\t\t\t}\r\n\t\t} else if (question.type === 'multiple') {\r\n\t\t\tif (!question.answer) question.answer = [];\r\n\t\t\tconst index = question.answer.indexOf(optionId);\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tquestion.answer.splice(index, 1);\r\n\t\t\t} else {\r\n\t\t\t\tquestion.answer.push(optionId);\r\n\t\t\t}\r\n\t\t\t// 多选分数计算\r\n\t\t\tconst selectedOptions = question.options.filter(opt => question.answer.includes(opt.id));\r\n\t\t\tconst score = selectedOptions.length ?\r\n\t\t\t\tMath.round(selectedOptions.reduce((sum, opt) => sum + (opt.value || 0), 0) / selectedOptions.length) :\r\n\t\t\t\t0;\r\n\t\t\tsubmitScore(questionId, score);\r\n\t\t}\r\n\t};\r\n\r\n\t// 星级评分选中逻辑\r\n\tconst isStarSelected = (questionId, index) => {\r\n\t\tif (!questionnaire.value) return false;\r\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\tif (!question || question.answer === null) return false;\r\n\t\tconst optionIndex = question.options.findIndex(opt => opt.id === question.answer);\r\n\t\treturn index <= optionIndex;\r\n\t};\r\n\r\n\t// 选择星级\r\n\tconst getStarScore = (star) => {\r\n\t\treturn star * 2;\r\n\t};\r\n\r\n\tconst selectStar = (questionId, star) => {\r\n\t\tif (!questionnaire.value) return;\r\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\tif (question) {\r\n\t\t\tquestion.answer = star;\r\n\t\t\tconst score = Math.round((star / 5) * 100);\r\n\t\t\tsubmitScore(questionId, score);\r\n\t\t}\r\n\t};\r\n\r\n\t// 计算滑块位置百分比\r\n\tconst getSliderPosition = (question) => {\r\n\t\tconst value = question.answer || 1;\r\n\t\tconst min = 1;\r\n\t\tconst max = 10;\r\n\t\tconst percent = ((value - min) / (max - min)) * 100;\r\n\t\treturn `${Math.max(0, Math.min(100, percent))}%`;\r\n\t};\r\n\r\n\t// 滑动过程中实时更新\r\n\tconst handleSliderChanging = (questionId, e) => {\r\n\t\tif (!questionnaire.value) return;\r\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\tif (question) question.answer = e.detail.value;\r\n\t};\r\n\r\n\t// 滑动结束确认并提交\r\n\tconst handleSliderChange = (questionId, e) => {\r\n\t\tif (!questionnaire.value) return;\r\n\t\tconst question = questionnaire.value.questions.find(q => q.id === questionId);\r\n\t\tif (question) {\r\n\t\t\tquestion.answer = e.detail.value;\r\n\t\t\tconst score = Math.round((e.detail.value / 10) * 100);\r\n\t\t\tsubmitScore(questionId, score);\r\n\t\t}\r\n\t};\r\n\r\n\t// 提交问卷（整体标记完成状态）\r\n\tconst submitQuestionnaire = async () => {\r\n\t\tif (!questionnaire.value || submitting.value) return;\r\n\r\n\t\t// 验证所有问题是否已回答\r\n\t\tconst allAnswered = questionnaire.value.questions.every(question => {\r\n\t\t\treturn question.answer !== null && question.answer !== undefined;\r\n\t\t});\r\n\r\n\t\tif (!allAnswered) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请完成所有问题',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsubmitting.value = true;\r\n\t\t\t\r\n\t\t\t// 标记问卷完成状态\r\n\t\t\tquestionnaire.value.status = 'completed';\r\n\r\n\t\t\t// 更新本地存储\r\n\t\t\tconst allQuestionnaires = JSON.parse(uni.getStorageSync('questionnaires') || '[]');\r\n\t\t\tconst index = allQuestionnaires.findIndex(q => q.id === questionnaire.value.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tallQuestionnaires[index] = questionnaire.value;\r\n\t\t\t} else {\r\n\t\t\t\tallQuestionnaires.push(questionnaire.value);\r\n\t\t\t}\r\n\t\t\tuni.setStorageSync('questionnaires', JSON.stringify(allQuestionnaires));\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '所有评分已提交',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => uni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t}), 800);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('提交问卷异常:', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '提交失败，请重试',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tsubmitting.value = false;\r\n\t\t}\r\n\t};\r\n\r\n\t// 重置问卷\r\n\tconst resetQuestionnaire = () => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '提示',\r\n\t\t\tcontent: '确定重新填写？当前答案将清空',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm && questionnaire.value) {\r\n\t\t\t\t\tquestionnaire.value.questions.forEach(question => {\r\n\t\t\t\t\t\tquestion.answer = null;\r\n\t\t\t\t\t\tif (question.type === 'slider') {\r\n\t\t\t\t\t\t\tquestion.answer = question.min || 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tquestionnaire.value.status = 'pending';\r\n\t\t\t\t\tconst allQuestionnaires = JSON.parse(uni.getStorageSync('questionnaires') || '[]');\r\n\t\t\t\t\tconst index = allQuestionnaires.findIndex(q => q.id === questionnaire.value.id);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tallQuestionnaires[index] = JSON.parse(JSON.stringify(questionnaire.value));\r\n\t\t\t\t\t\tuni.setStorageSync('questionnaires', JSON.stringify(allQuestionnaires));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已重置，可重新填写',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 样式保持不变 */\r\n\t.questionnaire-detail-page {\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tmin-height: 100vh;\r\n\t\tfont-size: 16px;\r\n\t\tpadding-bottom: 140rpx;\r\n\t}\r\n\r\n\t/* 顶部导航栏样式 */\r\n\t.page-header {\r\n\t\theight: 120rpx;\r\n\t\tbackground-color: #87CEEB;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 30rpx;\r\n\t\tposition: relative;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.back-button {\r\n\t\tposition: absolute;\r\n\t\tleft: 30rpx;\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.back-icon {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.header-title {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: 500;\r\n\t\ttext-align: center;\r\n\t\tmax-width: calc(100% - 120rpx);\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t/* 问卷内容样式 */\r\n\t.questionnaire-content {\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\r\n\t.question-item {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.question-number {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\r\n\t.question-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 25rpx;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t/* 单选样式 */\r\n\t.options-single {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\r\n\t.option-single {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 25rpx 30rpx;\r\n\t\tborder: 1rpx solid #eaeaea;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.option-single.selected {\r\n\t\tborder-color: #42b983;\r\n\t\tbackground-color: #f6ffed;\r\n\t}\r\n\r\n\t.radio-marker {\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t\tborder: 2rpx solid #999;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 20rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.option-single.selected .radio-marker {\r\n\t\tborder-color: #42b983;\r\n\t}\r\n\r\n\t.radio-dot {\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\twidth: 16rpx;\r\n\t\theight: 16rpx;\r\n\t\tbackground-color: #42b983;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t/* 多选样式 */\r\n\t.options-multiple {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\r\n\t.option-multiple {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 25rpx 30rpx;\r\n\t\tborder: 1rpx solid #eaeaea;\r\n\t\tborder-radius: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.option-multiple.selected {\r\n\t\tborder-color: #42b983;\r\n\t\tbackground-color: #f6ffed;\r\n\t}\r\n\r\n\t.checkbox-marker {\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t\tborder: 2rpx solid #999;\r\n\t\tborder-radius: 6rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.option-multiple.selected .checkbox-marker {\r\n\t\tbackground-color: #42b983;\r\n\t\tborder-color: #42b983;\r\n\t}\r\n\r\n\t.check-icon {\r\n\t\tcolor: white;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t/* 星级评分样式 */\r\n\t.options-rating {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\twidth: 100%;\r\n\t\tpadding: 10rpx 0;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.star-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 15rpx 5rpx;\r\n\t\tfont-size: 40rpx;\r\n\t\tcolor: #ccc;\r\n\t\ttransition: all 0.2s;\r\n\t\tcursor: pointer;\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.star-item.selected {\r\n\t\tcolor: #faad14;\r\n\t}\r\n\r\n\t.star-text {\r\n\t\tfont-size: 22rpx;\r\n\t\tmargin-top: 8rpx;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\r\n\t/* 滑动条样式 */\r\n\t.options-slider {\r\n\t\tpadding: 40rpx 20rpx 20rpx;\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.slider-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 600rpx;\r\n\t\tpadding: 0 10rpx;\r\n\t\tposition: relative;\r\n\t\theight: 80rpx;\r\n\t}\r\n\r\n\t/* 滑动提示气泡 */\r\n\t.slider-tooltip-wrapper {\r\n\t\tposition: absolute;\r\n\t\ttop: -50rpx;\r\n\t\ttransform: translateX(-50%);\r\n\t\tpointer-events: none;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.slider-tooltip {\r\n\t\tbackground-color: #42b983;\r\n\t\tcolor: white;\r\n\t\tpadding: 8rpx 16rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\twhite-space: nowrap;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\r\n\t}\r\n\r\n\t.tooltip-arrow {\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tborder-left: 10rpx solid transparent;\r\n\t\tborder-right: 10rpx solid transparent;\r\n\t\tborder-top: 10rpx solid #42b983;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t/* 滑块样式优化 */\r\n\tslider {\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t/* 标签样式优化 */\r\n\t.slider-labels {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\twidth: 100%;\r\n\t\tmax-width: 600rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-top: 10rpx;\r\n\t\tpadding: 0 10rpx;\r\n\t}\r\n\r\n\t/* 底部操作区 */\r\n\t.bottom-actions {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top: 1rpx solid #eaeaea;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: 99;\r\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tbackground-color: #42b983;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 60rpx;\r\n\t\twidth: 600rpx;\r\n\t\tpadding: 25rpx 0;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tbox-shadow: 0 4rpx 10rpx rgba(66, 185, 131, 0.3);\r\n\t}\r\n\r\n\t.submit-btn:disabled {\r\n\t\tbackground-color: #a0d9b9;\r\n\t\tcursor: not-allowed;\r\n\t}\r\n\r\n\t.reset-btn {\r\n\t\twidth: 600rpx;\r\n\t\tpadding: 25rpx 0;\r\n\t\ttext-align: center;\r\n\t\tcolor: #42b983;\r\n\t\tborder: 1rpx solid #42b983;\r\n\t\tborder-radius: 60rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t/* 加载状态 */\r\n\t.loading-state {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 300rpx;\r\n\t\tcolor: #999;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'D:/小程序/HBuilderX.4.75.2025071105/dx-project/dxuniapp/src/pages/questionnaire/questionnaireDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","post"],"mappings":"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"}