{"version":3,"file":"navigate.js","sources":["src/utils/navigate/navigate.ts"],"sourcesContent":["interface NavigateOptions {\n  loadingText?: string;\n  success?: (res: any) => void;\n  fail?: (err: UniApp.GeneralCallbackResult) => void;\n  onError?: (err: UniApp.GeneralCallbackResult) => void;\n}\n\nexport function navigateToWithLoading(\n  url: string, \n  options: NavigateOptions = {}\n): Promise<any> { \n  if (!url || !url.startsWith('/')) {\n    const err = new Error(`跳转路径不合法：${url}，需以 / 开头（如 /pages/index/index）`) as Error & { errMsg?: string };\n    err.errMsg = `navigateToWithLoading:fail ${err.message}`;\n\n    options.onError?.(err as UniApp.GeneralCallbackResult);\n    uni.showToast({ title: '路径错误', icon: 'none' });\n    return Promise.reject(err);\n  }\n  \n  uni.showLoading({\n    title: options.loadingText || '加载中...',\n    mask: true,\n    success: () => {},\n    fail: (loadErr) => {\n      options.onError?.(loadErr);\n      return Promise.reject(loadErr);\n    }\n  });\n  \n  return new Promise((resolve, reject) => {\n    uni.navigateTo({\n      url,\n      success: (res) => {\n        uni.hideLoading();\n        options.success?.(res);\n        resolve(res);\n      },\n      fail: (err) => {\n        uni.hideLoading();\n        if (options.onError) {\n          options.onError(err);\n        } else {\n          const errorMap: Record<string, string> = {\n            'page not found': '页面不存在',\n            'timeout': '加载超时',\n            'navigateTo:fail can not navigate to tabbar page': '不能跳转到 tabbar 页面（需用 switchTab）',\n            'navigateTo:fail page \"xxx\" is not found': '目标页面未在 pages.json 注册'\n          };\n          const matchKey = Object.keys(errorMap).find(key => \n            err.errMsg.toLowerCase().includes(key.toLowerCase())\n          ) || 'default';\n          uni.showToast({\n            title: errorMap[matchKey] || '跳转失败',\n            icon: 'none',\n            duration: 2000\n          });\n          console.error('页面跳转失败:', err);\n        }\n        options.fail?.(err);\n        reject(err);\n      }\n    });\n  });\n}\n"],"names":["uni","_a"],"mappings":";;AAOO,SAAS,sBACd,KACA,UAA2B,IACb;;AACd,MAAI,CAAC,OAAO,CAAC,IAAI,WAAW,GAAG,GAAG;AAChC,UAAM,MAAM,IAAI,MAAM,WAAW,GAAG,gCAAgC;AAChE,QAAA,SAAS,8BAA8B,IAAI,OAAO;AAEtD,kBAAQ,YAAR,iCAAkB;AAClBA,kBAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AACtC,WAAA,QAAQ,OAAO,GAAG;AAAA,EAC3B;AAEAA,gBAAAA,MAAI,YAAY;AAAA,IACd,OAAO,QAAQ,eAAe;AAAA,IAC9B,MAAM;AAAA,IACN,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,MAAM,CAAC,YAAY;;AACjB,OAAAC,MAAA,QAAQ,YAAR,gBAAAA,IAAA,cAAkB;AACX,aAAA,QAAQ,OAAO,OAAO;AAAA,IAC/B;AAAA,EAAA,CACD;AAED,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCD,kBAAAA,MAAI,WAAW;AAAA,MACb;AAAA,MACA,SAAS,CAAC,QAAQ;;AAChBA,sBAAA,MAAI,YAAY;AAChB,SAAAC,MAAA,QAAQ,YAAR,gBAAAA,IAAA,cAAkB;AAClB,gBAAQ,GAAG;AAAA,MACb;AAAA,MACA,MAAM,CAAC,QAAQ;;AACbD,sBAAA,MAAI,YAAY;AAChB,YAAI,QAAQ,SAAS;AACnB,kBAAQ,QAAQ,GAAG;AAAA,QAAA,OACd;AACL,gBAAM,WAAmC;AAAA,YACvC,kBAAkB;AAAA,YAClB,WAAW;AAAA,YACX,mDAAmD;AAAA,YACnD,2CAA2C;AAAA,UAAA;AAE7C,gBAAM,WAAW,OAAO,KAAK,QAAQ,EAAE;AAAA,YAAK,CAAA,QAC1C,IAAI,OAAO,cAAc,SAAS,IAAI,aAAa;AAAA,UAChD,KAAA;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,SAAS,QAAQ,KAAK;AAAA,YAC7B,MAAM;AAAA,YACN,UAAU;AAAA,UAAA,CACX;AACDA,wBAAA,MAAA,MAAA,SAAA,wCAAc,WAAW,GAAG;AAAA,QAC9B;AACA,SAAAC,MAAA,QAAQ,SAAR,gBAAAA,IAAA,cAAe;AACf,eAAO,GAAG;AAAA,MACZ;AAAA,IAAA,CACD;AAAA,EAAA,CACF;AACH;;"}