{"version":3,"file":"storageUtil.js","sources":["utils/login/storageUtil.js"],"sourcesContent":["// 登录存储工具：封装本地存储读写、用户信息构造逻辑\nexport const loginStorageUtil = {\n  buildUserInfo(userID, name, token) {\n    return {\n      userID,\n      name: name || '未设置',\n      teacherID: userID.startsWith('Z') ? userID : '',\n      studentID: userID.startsWith('Z') ? '' : userID,\n      loginTime: new Date().toLocaleString(),\n      token\n    };\n  },\n//存储自动登录数据到本地\r\n//userInfo = null表示第二个参数是可选的，如果不提供则默认为null值\n  saveAutoLoginData(token, userInfo = null) {\n    uni.setStorageSync('autoToken', token);\n    if (userInfo) {\n      uni.setStorageSync('userInfo', userInfo);\n    }\n  },\n//存储手动登录数据到本地\n  saveManualLoginData(token, userInfo) {\n    uni.setStorageSync('token', token);\n    uni.setStorageSync('userInfo', userInfo);\n    uni.setStorageSync('isLogin', true);\n  },\n//获取本地存储的登录数据\n  getLocalLoginData() {\n    return {\n      localAutoToken: uni.getStorageSync('autoToken'),\n      localManualToken: uni.getStorageSync('token'),\n      localUser: uni.getStorageSync('userInfo')\n    };\n  },\n  completeUserIdentity(localUser) {\n    if (localUser?.userID && !localUser.teacherID && !localUser.studentID) {\n      console.log('补全本地用户身份字段（teacherID/studentID）');\n      return {\n        ...localUser,\n        teacherID: localUser.userID.startsWith('Z') ? localUser.userID : '',\n        studentID: localUser.userID.startsWith('Z') ? '' : localUser.userID\n      };\n    }\n    return localUser;\n  },\n\n};"],"names":["uni"],"mappings":";;AACY,MAAC,mBAAmB;AAAA,EAC9B,cAAc,QAAQ,MAAM,OAAO;AACjC,WAAO;AAAA,MACL;AAAA,MACA,MAAM,QAAQ;AAAA,MACd,WAAW,OAAO,WAAW,GAAG,IAAI,SAAS;AAAA,MAC7C,WAAW,OAAO,WAAW,GAAG,IAAI,KAAK;AAAA,MACzC,YAAW,oBAAI,KAAM,GAAC,eAAgB;AAAA,MACtC;AAAA,IACN;AAAA,EACG;AAAA;AAAA;AAAA,EAGD,kBAAkB,OAAO,WAAW,MAAM;AACxCA,kBAAAA,MAAI,eAAe,aAAa,KAAK;AACrC,QAAI,UAAU;AACZA,oBAAAA,MAAI,eAAe,YAAY,QAAQ;AAAA,IACxC;AAAA,EACF;AAAA;AAAA,EAED,oBAAoB,OAAO,UAAU;AACnCA,kBAAAA,MAAI,eAAe,SAAS,KAAK;AACjCA,kBAAAA,MAAI,eAAe,YAAY,QAAQ;AACvCA,kBAAAA,MAAI,eAAe,WAAW,IAAI;AAAA,EACnC;AAAA;AAAA,EAED,oBAAoB;AAClB,WAAO;AAAA,MACL,gBAAgBA,cAAAA,MAAI,eAAe,WAAW;AAAA,MAC9C,kBAAkBA,cAAAA,MAAI,eAAe,OAAO;AAAA,MAC5C,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAAA,IAC9C;AAAA,EACG;AAAA,EACD,qBAAqB,WAAW;AAC9B,SAAI,uCAAW,WAAU,CAAC,UAAU,aAAa,CAAC,UAAU,WAAW;AACrEA,oBAAAA,MAAA,MAAA,OAAA,oCAAY,iCAAiC;AAC7C,aAAO;AAAA,QACL,GAAG;AAAA,QACH,WAAW,UAAU,OAAO,WAAW,GAAG,IAAI,UAAU,SAAS;AAAA,QACjE,WAAW,UAAU,OAAO,WAAW,GAAG,IAAI,KAAK,UAAU;AAAA,MACrE;AAAA,IACK;AACD,WAAO;AAAA,EACR;AAEH;;"}