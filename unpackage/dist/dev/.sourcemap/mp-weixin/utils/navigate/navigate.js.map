{"version":3,"file":"navigate.js","sources":["utils/navigate/navigate.ts"],"sourcesContent":["import { UniApp } from 'vue';\n\ninterface NavigateOptions {\n  loadingText?: string;\n  success?: () => void;\n  fail?: (err: UniApp.NavigateToOptionsFailCallbackResult) => void;\n  onError?: (err: UniApp.NavigateToOptionsFailCallbackResult) => void;\n}\n\nexport function navigateToWithLoading(url: string, options: NavigateOptions = {}) {\n  uni.showLoading({ title: options.loadingText || '加载中...' });\n  \n  return new Promise<UniApp.NavigateToOptionsSuccessCallbackResult>((resolve, reject) => {\n    uni.navigateTo({\n      url,\n      success: (res) => {\n        uni.hideLoading();\n        options.success?.();\n        resolve(res);\n      },\n      fail: (err) => {\n        uni.hideLoading();\n        \n        if (options.onError) {\n          options.onError(err);\n        } else {\n          const errorMap: Record<string, string> = {\n            'page not found': '页面不存在',\n            'timeout': '加载超时',\n          };\n          const matchKey = Object.keys(errorMap).find(key => err.errMsg.includes(key)) || 'default';\n          uni.showToast({ \n            title: errorMap[matchKey] || '跳转失败', \n            icon: 'none' \n          });\n          console.error('跳转错误:', err);\n        }\n        \n        options.fail?.(err);\n        reject(err);\n      }\n    });\n  });\n}"],"names":["uni"],"mappings":";;AASO,SAAS,sBAAsB,KAAa,UAA2B,IAAI;AAChFA,gBAAA,MAAI,YAAY,EAAE,OAAO,QAAQ,eAAe,UAAU;AAE1D,SAAO,IAAI,QAAuD,CAAC,SAAS,WAAW;AACrFA,kBAAAA,MAAI,WAAW;AAAA,MACb;AAAA,MACA,SAAS,CAAC,QAAQ;;AAChBA,sBAAA,MAAI,YAAY;AAChB,sBAAQ,YAAR;AACA,gBAAQ,GAAG;AAAA,MACb;AAAA,MACA,MAAM,CAAC,QAAQ;;AACbA,sBAAA,MAAI,YAAY;AAEhB,YAAI,QAAQ,SAAS;AACnB,kBAAQ,QAAQ,GAAG;AAAA,QAAA,OACd;AACL,gBAAM,WAAmC;AAAA,YACvC,kBAAkB;AAAA,YAClB,WAAW;AAAA,UAAA;AAEb,gBAAM,WAAW,OAAO,KAAK,QAAQ,EAAE,KAAK,CAAO,QAAA,IAAI,OAAO,SAAS,GAAG,CAAC,KAAK;AAChFA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,SAAS,QAAQ,KAAK;AAAA,YAC7B,MAAM;AAAA,UAAA,CACP;AACDA,wBAAA,MAAc,MAAA,SAAA,oCAAA,SAAS,GAAG;AAAA,QAC5B;AAEA,sBAAQ,SAAR,iCAAe;AACf,eAAO,GAAG;AAAA,MACZ;AAAA,IAAA,CACD;AAAA,EAAA,CACF;AACH;;"}