{"version":3,"file":"navigate.js","sources":["utils/navigate/navigate.ts"],"sourcesContent":["import { UniApp } from 'vue';\r\n\r\ninterface NavigateOptions {\r\n  loadingText?: string;\r\n  success?: () => void;\r\n  fail?: (err: UniApp.NavigateToOptionsFailCallbackResult) => void;\r\n  onError?: (err: UniApp.NavigateToOptionsFailCallbackResult) => void;\r\n}\r\n\r\nexport function navigateToWithLoading(url: string, options: NavigateOptions = {}) {\r\n  uni.showLoading({ title: options.loadingText || '加载中...' });\r\n  \r\n  return new Promise<UniApp.NavigateToOptionsSuccessCallbackResult>((resolve, reject) => {\r\n    uni.navigateTo({\r\n      url,\r\n      success: (res) => {\r\n        uni.hideLoading();\r\n        options.success?.();\r\n        resolve(res);\r\n      },\r\n      fail: (err) => {\r\n        uni.hideLoading();\r\n        \r\n        if (options.onError) {\r\n          options.onError(err);\r\n        } else {\r\n          const errorMap: Record<string, string> = {\r\n            'page not found': '页面不存在',\r\n            'timeout': '加载超时',\r\n          };\r\n          const matchKey = Object.keys(errorMap).find(key => err.errMsg.includes(key)) || 'default';\r\n          uni.showToast({ \r\n            title: errorMap[matchKey] || '跳转失败', \r\n            icon: 'none' \r\n          });\r\n          console.error('跳转错误:', err);\r\n        }\r\n        \r\n        options.fail?.(err);\r\n        reject(err);\r\n      }\r\n    });\r\n  });\r\n}"],"names":["uni"],"mappings":";;AASO,SAAS,sBAAsB,KAAa,UAA2B,IAAI;AAChFA,gBAAA,MAAI,YAAY,EAAE,OAAO,QAAQ,eAAe,UAAU;AAE1D,SAAO,IAAI,QAAuD,CAAC,SAAS,WAAW;AACrFA,kBAAAA,MAAI,WAAW;AAAA,MACb;AAAA,MACA,SAAS,CAAC,QAAQ;;AAChBA,sBAAA,MAAI,YAAY;AAChB,sBAAQ,YAAR;AACA,gBAAQ,GAAG;AAAA,MACb;AAAA,MACA,MAAM,CAAC,QAAQ;;AACbA,sBAAA,MAAI,YAAY;AAEhB,YAAI,QAAQ,SAAS;AACnB,kBAAQ,QAAQ,GAAG;AAAA,QAAA,OACd;AACL,gBAAM,WAAmC;AAAA,YACvC,kBAAkB;AAAA,YAClB,WAAW;AAAA,UAAA;AAEb,gBAAM,WAAW,OAAO,KAAK,QAAQ,EAAE,KAAK,CAAO,QAAA,IAAI,OAAO,SAAS,GAAG,CAAC,KAAK;AAChFA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,SAAS,QAAQ,KAAK;AAAA,YAC7B,MAAM;AAAA,UAAA,CACP;AACDA,wBAAA,MAAA,MAAA,SAAA,oCAAc,SAAS,GAAG;AAAA,QAC5B;AAEA,sBAAQ,SAAR,iCAAe;AACf,eAAO,GAAG;AAAA,MACZ;AAAA,IAAA,CACD;AAAA,EAAA,CACF;AACH;;"}